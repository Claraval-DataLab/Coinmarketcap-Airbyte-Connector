version: 0.85.0

type: DeclarativeSource

check:
  type: CheckStream
  stream_names:
    - Coinmarketcap-Airbyte-Connector

definitions:
  streams:
    Coinmarketcap-Airbyte-Connector:
      type: DeclarativeStream
      name: Coinmarketcap-Airbyte-Connector
      retriever:
        type: SimpleRetriever
        requester:
          $ref: '#/definitions/base_requester'
          path: https://web-api.coinmarketcap.com/v1/cryptocurrency/map
          http_method: GET
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path: []
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: '#/schemas/Coinmarketcap-Airbyte-Connector'
  base_requester:
    type: HttpRequester
    url_base: https://web-api.coinmarketcap.com/v1/cryptocurrency/map

streams:
  - $ref: '#/definitions/streams/Coinmarketcap-Airbyte-Connector'

spec:
  type: Spec
  connection_specification:
    type: object
    $schema: http://json-schema.org/draft-07/schema#
    required: []
    properties: {}
    additionalProperties: true

metadata:
  autoImportSchema:
    Coinmarketcap-Airbyte-Connector: true

schemas:
  Coinmarketcap-Airbyte-Connector:
    type: object
    $schema: http://json-schema.org/schema#
    properties:
      data:
        type:
          - array
          - 'null'
        items:
          type:
            - object
            - 'null'
          properties:
            id:
              type:
                - number
                - 'null'
            name:
              type:
                - string
                - 'null'
            rank:
              type:
                - number
                - 'null'
            slug:
              type:
                - string
                - 'null'
            symbol:
              type:
                - string
                - 'null'
            platform:
              type:
                - object
                - 'null'
              properties:
                id:
                  type:
                    - number
                    - 'null'
                name:
                  type:
                    - string
                    - 'null'
                slug:
                  type:
                    - string
                    - 'null'
                symbol:
                  type:
                    - string
                    - 'null'
                token_address:
                  type:
                    - string
                    - 'null'
            is_active:
              type:
                - number
                - 'null'
            last_historical_data:
              type:
                - string
                - 'null'
            first_historical_data:
              type:
                - string
                - 'null'
      status:
        type:
          - object
          - 'null'
        properties:
          elapsed:
            type:
              - number
              - 'null'
          timestamp:
            type:
              - string
              - 'null'
          error_code:
            type:
              - number
              - 'null'
          credit_count:
            type:
              - number
              - 'null'
    additionalProperties: true
